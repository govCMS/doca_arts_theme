!function(e,t){"use strict";t.behaviors.artsSignupForm={attach:function(){function i(){var i=e(".alert-signup__message"),a=e(".alert-signup__form"),o={};o.EMAIL=e("#st_EMAIL").val();var n={};"0"===t.settings.doca_theme.alertHideName&&("0"===t.settings.doca_theme.alertFullName?(o.FIRST_NAME=e("#st_FIRST_NAME").val(),o.LAST_NAME=e("#st_LAST_NAME").val()):n.cu_FULL_NAME=e("#cu_FULL_NAME").val()),t.settings.doca_theme.alertHideNumber||(n.cu_CONTACT_NUMBER=e("#cu_CONTACT_NUMBER").val()),n.cu_DEPARTMENT_ID=e("#cu_DEPARTMENT_ID").val();var l=t.settings.doca_theme.alertMailGroup.split(","),r=t.settings.doca_theme.microSite,s=t.settings.doca_theme.apicall,c=t.settings.doca_theme.errorMessage;e.getJSON(r+"/scripts/subscribe/subscribe.php?callback=?",{st:o,cu:n,gr:l,method:s,format:"json"},function(o){switch(e(a).hide(),o.code){case"000":e(i).addClass("messages--status").html(t.settings.doca_theme.alertSuccessMessage);break;case"101":case"102":case"103":e(i).addClass("messages--error").html(c+"<br/><strong>Error:</strong> "+o.message);break;default:e(i).addClass("messages--error").html(c)}})}e(".alert-signup__form").submit(function(e){return e.preventDefault(),i(),!1})}}}(jQuery,Drupal);var year_toggled=!1,cat_toggled=!1,winner_val="All";!function(e,t){t.behaviors.books={attach:function(t){function i(){e(".ajax-progress-throbber").remove()}function a(e){i(),e.after('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>')}function o(){e('.view-filters [name="field_winner_value"]').attr("disabled","disabled"),e('.view-filters [id^="filter-wrapper-bookyear-tid"] input').attr("disabled","disabled"),e('.view-filters [id^="filter-wrapper-booktype-tid"] input').attr("disabled","disabled"),e('.view-filters .manual [name="combine"]').attr("disabled","disabled")}if(e(".view-book-search").length>0){e('.view-filters [name="field_winner_value"]').val()!=winner_val&&e('.view-filters [name="field_winner_value"]').val(winner_val).change(),e('.view-filters [name="field_winner_value"]').bind("change",function(){winner_val=e('.view-filters [name="field_winner_value"]').val()});var n;""!=e("#edit-combine").val()?e(".views-row.book").each(function(){n=e(this).find(".book-details__overlay").outerHeight()+20,e(this).find(".views-field-field-thumbnail").css("top",n)}):e(".views-row.book").hover(function(){n=e(this).find(".book-details__overlay").outerHeight()+20,e(this).find(".views-field-field-thumbnail").animate({top:n},200)},function(){e(this).find(".views-field-field-thumbnail").animate({top:0},200)});var l=!1,r=!1;e("#category-wrapper").ready(function(){e("#filter-wrapper-booktype-tid").length&&e("#filter-wrapper-booktype-tid").remove();var t='<div class="filter" id="filter-wrapper-booktype-tid"><label class="filter__label" id="label-field-book-type-tid_cb" for="edit-field-book-type-tid_cb">Categories</label>';t+='<div id="edit-field-book-type-tid_cb" class="form-checkboxes">',e("#category-wrapper").find("select option").each(function(i){t+='<div class="form-item form-type-checkbox">';var a=e(this).val();t+='<input type="checkbox" id="id-'+a+'" name="field_book_type_tid_check[]" value="'+a+'" class="form-checkbox"',e(this).attr("selected")&&(t+=" checked",r=!0),t+=">",t+='<label class="option" for="id-'+a+'">'+e(this).text()+"</label></div>"}),t+="</div></div>",e('[id^="views-exposed-form-book-search-default"], [id^="views-exposed-form-book-search-book-search"]').after(t),e("#edit-field-book-type-tid_cb").find(":checkbox").bind("change",function(){o(),a(e(".filter.manual .form-submit")),e(this).attr("checked")?e("#category-wrapper").find('select option[value="'+e(this).attr("id").replace("id-","")+'"]').selected(!0).change():e("#category-wrapper").find('select option[value="'+e(this).attr("id").replace("id-","")+'"]').selected(!1).change()})}),e("#year-wrapper").ready(function(){e("#filter-wrapper-bookyear-tid").length&&e("#filter-wrapper-bookyear-tid").remove();var t='<div class="filter" id="filter-wrapper-bookyear-tid"><label class="filter__label" for="edit-form-item-field-book-year-tid">Year</label>';t+='<div id="edit-form-item-field-book-year-tid" class="form-checkboxes">',e("#year-wrapper").find("select option").each(function(i){t+='<div class="form-item form-type-checkbox">';var a=e(this).val();t+='<input type="checkbox" id="id-'+a+'" name="field_book_year_tid_check[]" value="'+a+'" class="form-checkbox"',e(this).attr("selected")&&(t+=" checked",l=!0),t+=">",t+='<label class="option" for="id-'+a+'">'+e(this).text()+"</label></div>"}),t+="</div></div>",e('[id^="views-exposed-form-book-search-default"], [id^="views-exposed-form-book-search-book-search"]').after(t),e("#edit-form-item-field-book-year-tid").find(":checkbox").bind("change",function(){o(),a(e(".filter.manual .form-submit")),e(this).attr("checked")?e("#year-wrapper").find('select option[value="'+e(this).attr("id").replace("id-","")+'"]').selected(!0).change():e("#year-wrapper").find('select option[value="'+e(this).attr("id").replace("id-","")+'"]').selected(!1).change()})}),e('.filter.manual [name="combine"]').val(e('form .filter [name="combine"]').val()),e('.filter.manual [name="combine"]').blur(function(){e('form .filter [name="combine"]').val(e('.filter.manual [name="combine"]').val())}),e('.filter.manual [name="combine"]').bind("keypress",function(t){13==t.which&&(o(),e('form .filter [name="combine"]').val(e('.filter.manual [name="combine"]').val()),a(e(".filter.manual .form-submit")),e('form .filter [name="combine"]').change())}),e(".filter.manual .form-submit").bind("keypress",function(t){13==t.which&&(o(),a(e(".filter.manual .form-submit")),e('form .filter [name="combine"]').change())}),e(".filter.manual .form-submit").bind("click",function(t){o(),a(e(".filter.manual .form-submit")),e('form .filter [name="combine"]').change()}),(r||cat_toggled)&&(e('.filter__label[for="edit-field-book-type-tid_cb"]').toggleClass("open"),e('.filter__label[for="edit-field-book-type-tid_cb"]').next().toggleClass("open")),(l||year_toggled)&&(e('.filter__label[for="edit-form-item-field-book-year-tid"]').toggleClass("open"),e('.filter__label[for="edit-form-item-field-book-year-tid"]').next().toggleClass("open")),e('.filter__label[for="edit-form-item-field-book-year-tid"], .filter__label[for="edit-field-book-type-tid_cb"]').bind("click",function(){e(this).toggleClass("open"),e(this).next().toggleClass("open"),"Year"==e(this).text()?year_toggled=!year_toggled:cat_toggled=!cat_toggled})}if(e(".book-author").each(function(){e(this).find(".field-name-field-pbundle-subtitle").length>1&&e(this).find(".pmla_author").html("Authors: "),0==e(this).find(".field-name-field-pbundle-subtitle").length&&e(this).find(".pmla_author").html("")}),e(".book-illustrator").each(function(){e(this).find(".field-name-field-pbundle-subtitle").length>1&&e(this).find(".pmla_illustrator").html("Illustrators: "),0==e(this).find(".field-name-field-pbundle-subtitle").length&&e(this).find(".pmla_illustrator").html("")}),e(".layout-sidebar__main > .view-empty").length>0){var s=!1;if(""==e("#edit-combine").val()){var c=0,d=e("#edit-field-book-type-tid option:selected").length,f=e("#edit-field-book-year-tid option:selected").length;if(f>0){var h=(new Date).getFullYear(),m="";e("#edit-field-book-year-tid option:selected").each(function(t){if(1==e("#edit-field-book-year-tid option:selected").length&&e(this).text()==h&&1==e('select[name="field_winner_value"]').val())return e("#no-yr").show(),s=!0,c=1,!1;m+=t<f-1?e(this).filter(":selected").text()+", ":e(this).filter(":selected").text()}),e(".view-empty span:last-child").text(" in "+m)}if(d>0&&0==c){var u="";e("#edit-field-book-type-tid option:selected").each(function(t){u+=t<d-1?e(this).filter(":selected").text()+", ":e(this).filter(":selected").text()}),e(".view-empty span:first-child").html(" "+u+" "),e("#no-cat").show(),s=!0}}s||e("#no-res").show()}}}}(jQuery,Drupal),function(e,t){"use strict";t.behaviors.site={attach:function(t,i){e(document).ready(function(){e(".modaal-gallery").modaal({type:"image"})})}},t.behaviors.skipLink={attach:function(){setTimeout(function(){var t=e("#skip-link").siblings().first();e(t).before(e("#skip-link"))},2100),e("#skip-link").click(function(){e("#skip-content").focus()})}},t.behaviors.twitterFeed={attach:function(){setTimeout(function(){e("iframe[id^=twitter-widget-").each(function(){var t=e(this).contents().find("head");t.length&&t.append('<style type="text/css">.timeline { max-width: none !important; width: 100% !important; } .timeline .stream { max-width: none !important; width: 100% !important; } </style>')})},2e3)}},t.behaviors.iframeLinks={attach:function(t){e(".view-consultations-iframe",t).find("a").each(function(){var t=e(this);t.is("[target]")||t.attr("target","_parent")})}},t.behaviors.streamLinks={attach:function(i){var a="/"+t.settings.pathToTheme+"/dist/images/icons/stream/";e(".channel-list__grid-item a",i).each(function(){var t=e(this).find("img").attr("src"),i=t,o=t.split("/");t=o[o.length-1];var n=t.replace(".svg","_h.svg");n=a+n;var l=t.replace(".svg","_a.svg");l=a+l,e(this).hover(function(){e(this).find("img").attr("src",n)},function(){e(this).find("img").attr("src",i)}),e(this).mousedown(function(){e(this).find("img").attr("src",l)}),e(this).mouseup(function(){e(this).find("img").attr("src",i)})})}},t.behaviors.qanda={attach:function(t){e("#qa-expand",t).bind("click",function(t){t.preventDefault(),e(this).hasClass("open-all")?(e(this).removeClass("open-all"),e(this).html("Expand all <span>+</span>"),e('.accordion__button[aria-expanded="true"]').click()):(e(this).addClass("open-all"),e(this).html("Collapse all <span>-</span>"),e('.accordion__button[aria-expanded="false"]').click())})}},t.behaviors.caption_hover={attach:function(t){"ontouchstart"in document.documentElement||e(".featured-with-caption",t).hover(function(){e(this).find(".featured-overlay").fadeIn(100),e(this).closest("div.node").css("overflow","visible")},function(){e(this).find(".featured-overlay").fadeOut(100),e(this).closest("div.node").css("overflow","hidden")})}},t.behaviors.ga={attach:function(i){e("body",i).once("gaBehavior",function(){var i=t.settings.gaSettings.gaCode;!function(e,t,i,a,o,n,l){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,n=t.createElement(i),l=t.getElementsByTagName(i)[0],n.async=1,n.src="//www.google-analytics.com/analytics.js",l.parentNode.insertBefore(n,l)}(window,document,"script",0,"ga"),ga("create",i,{cookieDomain:"auto"}),ga("set","page",location.pathname+location.search+location.hash);ga("create",i,"auto",{name:"govcms"}),ga("govcms.send","pageview",{anonymizeIp:!0}),e(".webform-client-form").submit(function(t){var i=e(this);ga("send",{hitType:"event",eventCategory:"webform",eventAction:"submit",eventLabel:i.attr("id")})})})}},t.behaviors.tables={attach:function(t){e(".tablesaw").length>0&&e(".tablesaw tbody tr:even").addClass("tr-even")}}}(jQuery,Drupal),jQuery.extend({getUrlVars:function(){for(var e,t=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<i.length;a++)e=i[a].split("="),t.push(e[0]),t[e[0]]=e[1];return t},getUrlVar:function(e){return $.getUrlVars()[e]}});